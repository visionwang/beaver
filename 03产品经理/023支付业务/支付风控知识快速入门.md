晚上有一个阿里风控方便的面试，准备一波。

[支付风控系统设计：支付风控场景分析(一)](http://www.woshipm.com/pd/502457.html)
[支付风控系统设计：风控数据仓库建设（二）](http://www.woshipm.com/data-analysis/527332.html)
#基本概念
风险是指在特定场景下，特定时间内某个损失发生的可能性，或者说是在某一个特定时间段里，人们所期望达到的目标与实际出现的结果之间的差距。金融领域自从诞生以来，就一直伴随着风险。风险控制是指风险管理者采取各种措施和方法，消灭或减少风险事件发生的各种可能性，或风险控制者减少风险事件发生时造成的损失。这里又引入了一个词，风险事件， 它和风险因素经常容易混淆。 风险事件指造成风险的直接原因，风险因素则是间接原因。 如下雨天路滑导致发生车祸造成人员伤亡。 则车祸是人员伤亡的直接原因，是风险事件。而下雨天是间接原因，属于风险因素。
**常见风险包括账户风险、交易风险、资金风险、套现风险、操作风险、合规风险、洗钱风险等。

###账户风险（数据库）
![](http://image.woshipm.com/wp-files/2016/12/z8MGTl2kJHGF6HzeXX8W.png)
**拖库**
拖库是实施账户攻击的第一步。考虑到大型网站一般防守比较严密，黑客一般选择从小型网站入手，入侵到一些防守薄弱或有漏洞的网站

* 利用操作系统和系统组件漏洞，如Heartlbleed漏洞
* 利用网站所使用的第三方组件漏洞, 如Struts
* SQL注入攻击

**洗库**
在攻入服务器，获取到资料，特别是数据库的信息后， 需要对信息进行分析。 

* 暴力破解
* 字典表
* 彩虹表，这是一种破解哈希算法的技术，是黑客必备的跨平台密码破解方法，可以破解MD5进行哈希处理的密码。它的性能优异，在一台普通PC上辅以NVidia CUDA技术，对于Microsoft Windows操作系统使用的NTLM密码加密算法，可以达到最高超过1千亿次每秒的明文尝试。

**撞库**
第三步是撞库，就开始进攻真正的目标网站了。 把拿到的账户信息去尝试登陆大型网站。因为大部分用户，习惯于在多个网站使用同一套账户和密码。

###交易风险（刷单）
支付的交易风险主要是交易过程中的各种恶意行为，而这些行为在电商系统中表现特别突出，包括**自动刷单、人工批量下单以及异常大额订单**等场景。在**秒杀**的时候，由于其价格有很大的优惠力度，黄牛会采用机器批量注册账号、机器抢购等方式来争取秒杀商品，普通消费者很难享受到秒杀的实惠，使得秒杀活动效果大打折扣。此外，**在商家侧**，主要的风险在于刷单。不少商家使用刷单、刷评价的方式来以非正常途径提升销量，积分，信誉等。甚至通过刷单的方式来套取补贴，帮助套现。

* 小号刷单。谁也不会用自己的注册账号来刷单，这样被封的代价就太大了。 小号的来源，可能是商家自己组织注册的，但大部分还是从专业刷单机构手中获取的。
* 使用虚拟机。大部分网站都会为访问设备植入识别码。通过虚拟机，可以在一个物理机上模拟多台机器访问，随用随建。一般使用VMWare来建立虚拟机。而对手机设备，则会采用手机模拟器。
* 使用VPN。 这样可以伪装使用全国任何一个地区的IP，甚至可以使用国外的VPN。
* 使用手机IP：移动和联通的IP出口少，所以大部分手机端的出口IP并不多。 这些IP是电商的白名单，把某个IP封了，那会有大量的手机无法正常访问。 所以刷单人员会选择使用这些IP。
* 刷虚拟物品：虚拟物品不涉及到物流环节，交易流程简单，很容易就可以把量刷上去。
* 低价刷单：为了降低成本，往往会将单品价格调低，或者成交金额调低来支持刷单。
* 交易商品少：刷单时，仅选择少量几个商品进行。
* 互刷： 一些商家会勾结起来，相互刷单。

###资金风险
发展沉淀资金成为支付系统，特别是第三方支付系统的一个公开的秘密，沉淀资金主要有如下两种形式。

* **在途资金** 指买卖双方在确认交易后，完成结算前尚未到达卖方账户的资金，在买方没有最终确认收货之前，资金暂时交由第三方支付进行保管。
* **留存资金** 对采用交易担保型账户的支付机构，客户需要开立虚拟账户来完成交易。机构也会吸引客户进行充值操作，即留存一些资金用于交易。比如微信支付和支付宝的钱包。

2013年央行出台了《支付机构客户备付金存管办法》，其中明确要求第三方支付机构对于客户的备付金要进行严格的区分管理。

###套现风险
我国法律明确禁止使用信用卡套现，使用信用卡套现是违法的。但是在线支付系统中，使用信用卡进行套现，几乎是不需要成本的。 信用卡套现的手段也很多，一般是通过客户和商家的勾结来完成，比如

* 虚假购买  客户通过信用卡购买某商品后，商品并未实际发货，商家将购买的款项打回给客户，完成套现。
* 退货套现  或者通过信用卡来购买商品，然后退货，将退款返回到借记卡或者其他可提现的渠道，也能完成套现。
* 自买自卖  商家通过信用卡购买自己的商品，将货款打入到借记卡中，完成套现。

###操作风险
按照巴塞尔委员会《操作风险管理》的定义， **操作风险**主要是指那些由于用户支付终端操作失误、工作人员违规操作、内控机制失灵等人员操作上的原因引致损失的风险，或者说是外部风险、员工风险和流程风险。

* **流程风险** 比如当新的支付方式上线后，配套的清结算、记账、对账等功能，未必能够及时地跟上，更不用说相关的内控制度建设、岗位人员配备的工作。
* **员工风险** 欺诈行为、越权行为、错误操作

###合规风险
合规风险指机构因未能遵守相关的法律法规从而导致机构可能受到处罚、声誉受损的风险。从2004年的<mark>电子签名法</mark>开始，和支付相关的法律法规：
![](http://image.woshipm.com/wp-files/2016/12/43NEB9IiKLGMFUW5QHyX.png)
其中2010年的《非金融机构支付服务管理办法实施细则》是一个标志性的法规，标识国家开始认可第三方支付的地位并开始执行监管。合规风险是国内第三方公司一个无法规避的风险，在企业发展过程中，需要密切关注央行的动向，减少合规带来的负面影响。

###洗钱风险
第三方支付目前成为洗钱的重灾区。 2016年8月，18家支付机构被公安部列为重点整改对象。 这些支付机构提供的服务，存在未落实实名制、风控措施不严格等问题，被犯罪分子所利用，沦为咋骗和洗钱的工具。主要手段包括：

* 通过一些第三方支付平台发行的商户POS机虚构交易套现
* 将诈骗得手的资金转移到第三方支付平台账户，在线购买游戏点卡、比特币、手机充值卡等物品，再转卖套现
* 利用第三方支付平台转账功能，将赃款在银行账户和第三方支付平台之间多次切换，使得公安机关无法及时查询资金流向，逃避打击。

2012年央行发布的《支付机构反洗钱和反恐怖融资管理办法》，对支付机构如何防范洗钱风险做了明确的规范和要求，需要支付公司严格遵守。







































