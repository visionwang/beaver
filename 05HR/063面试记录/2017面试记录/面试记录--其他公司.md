这部分记录一些规模稍微较小的公司的面试过程。
![](http://i.imgur.com/7CHcPBd.png)

# 美囤妈妈--宝宝树 #
[美囤妈妈官网](http://www.meitun.com/)
在五角场附近，离家很近。
这部分技术面试遇到了不少之前思考的不深入的问题，特地买了《Java并发变成的艺术》和《高性能MYSQL》，望能熟练掌握这部分知识。
**1.主键索引和唯一索引那个快？为什么？**
唯一索引,唯一索引不允许两行具有相同的索引值;主键索引是唯一索引的特殊类型。
数据库表通常有一列或列组合，其值用来唯一标识表中的每一行。该列称为表的主键。为经常用于查询的、Order By和Group By的谓词创建索引.
索引可以理解为一种特殊的目录。比如我们的汉语字典的正文本身就是一个聚集索引，我们把这种目录纯粹是目录，正文纯粹是正文的排序方式称为“非聚集索引”。
**索引使用的误区**
a.主键作为聚集索引
通常，我们会在每个表中都建立一个ID列，以区分每条数据，并且这个ID列是自动增大的，步长一般为1。此时，如果我们将这个列设为主键，SQL SERVER会将此列默认为聚集索引。这样做有好处，就是可以让您的数据在数据库中按照ID进行物理排序，但笔者认为这样做意义不大。显而易见，聚集索引的优势是很明显的，而每个表中只能有一个聚集索引的规则，这使得聚集索引变得更加珍贵。
从我们前面谈到的聚集索引的定义我们可以看出，使用聚集索引的最大好处就是能够根据查询要求，迅速缩小查询范围，避免全表扫描。在实际应用中，因为ID号是自动生成的，我们并不知道每条记录的ID号，所以我们很难在实践中用ID号来进行查询。这就使让**ID号这个主键作为聚集索引成为一种资源浪费**。其次，让每个ID号都不同的字段作为聚集索引也不符合“**大数目的不同值情况下不应建立聚合索引**”规则；当然，这种情况只是针对用户经常修改记录内容，特别是索引项的时候会负作用，但对于查询速度并没有影响。

b.只要建立索引就能显著提高查询速度
比如聚合索引和非聚合索引速度上就有很大差异，但查询速度却有着天壤之别。所以，并非是在任何字段上简单地建立索引就能提高查询速度。建立聚集索引要求的：“既不能绝大多数都相同，又不能只有极少数相同”的规则，比如日期一般会比较满足该要求。

c.把所有需要提高查询速度的字段都加进聚集索引，以提高查询速度

索引**使用经验总结**
a.用聚合索引比用不是聚合索引的主键速度快
b.用聚合索引比用一般的主键作order by时速度快，特别是在小数据量情况下
c.使用聚合索引内的时间段，搜索时间会按数据占整个数据表的百分比成比例减少，而无论聚合索引使用了多少个
d.日期列不会因为有分秒的输入而减慢查询速度

**2.那些点需要设置索引**？
适合的场景：外键、查询列、order by、group by列
不适合建立索引的场景：对于内容基本重复的列，比如只有1和0，禁止建立索引，因为该索引选择性极差，在特定的情况下会误导优化器做出错误的选择，导致查询速度极大下降;当一个索引有多个列构成时，应注意将选择性强的列放在前面。仅仅前后次序的不同，性能上就可能出现数量级的差异;对小表进行索引可能不能产生优化效果，因为查询优化器在遍历用于搜索数据的索引时，花费的时间可能比执行简单的表扫描还长，设计索引时需要考虑表的大小。记录数不大于100的表不要建立索引。频繁操作的小数量表不建议建立索引（记录数不大于5000条）

**3.区分代理模式，适配器模式和Facade门面模式？**
区分设计模式主要通过使用场景和实现方法两个角度进行分析。
**定义**
代理模式（Proxy）：为其他对象提供一种代理以控制对这个对象的访问。
适配器模式（Adapter）：将一个类的接口转换成客户希望的另外一个接口，使得原本接口不兼容而不能一起工作的那些类可以一起工作。
外观模式（Facade）：为子系统中的一组接口提供一个一致的界面，此模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。
**理解**
代理模式和适配器模式应该说很相像，但是他们的区别也很明显，代理模式和被代理者的接口是同一个，只是使用中客户访问不到被代理者，所以利用代理间接的访问，而适配器模式，是因为接口不同，为了让用户使用到统一的接口，把原先的对象通过适配器让用户统一的使用，大多数运用在代码维护的后期，或者借用第三方库的情况下 ，而外观模式，是大家经常无意中使用的，就是把错综复杂的子系统关系封装起来，然后提供一个简单的接口给客户使用，就类似于一个转接口，可以想象成一个漏斗，中间细的那一段，越细耦合度越低，外观模式就是为了降低耦合度。
**Code**
代理模式，代理者保存一个被代理的一个对象；适配器模式，保存了一个被适配的对象；而外观模式，就保存了各个子系统对象，然后根据实际逻辑组合。
**适用范围**
代理模式：可以用于远程访问，虚拟代理，以及权限控制，引用代理等。 
适配器模式：当系统的数据与行为都正确，但是接口不符合是，可以通适配达到协调 
门面模式：开发时通过门面模式可以隐藏复杂的实现步骤，维护旧系统的时候，可以封装遗留代码，提供清晰借口。

**4.ConcurrentHashMap与HashTable的线程安全上的区别**？
[HashMap HashTable和ConcurrentHashMap的区别](http://www.cnblogs.com/binyue/p/4545550.html)
Hashtable和HashMap有几个主要的不同：线程安全以及速度。仅在你需要完全的线程安全的时候使用Hashtable，而如果你使用Java 5或以上的话，请使用ConcurrentHashMap吧。
从类图中可以看出来在存储结构中ConcurrentHashMap比HashMap多出了一个类Segment，而Segment是一个可重入锁。 
tip:难道说是Con同时支持锁表和锁行？
ConcurrentHashMap是使用了锁分段技术技术来保证线程安全的。 
锁分段技术：首先将数据分成一段一段的存储，然后给每一段数据配一把锁，当一个线程占用锁访问其中一个段数据的时候，其他段的数据也能被其他线程访问。

**5.lock，monitor有什么区别？**
[深入研究 Java Synchronize 和 Lock 的区别与用法](http://blog.csdn.net/natian306/article/details/18504111)
synchronized：在需要同步的对象中加入此控制，synchronized可以加在方法上，也可以加在特定代码块中，括号中表示需要锁的对象。
lock：需要显示指定起始位置和终止位置。一般使用ReentrantLock类做为锁，多个线程中必须要使用一个ReentrantLock类做为对象才能保证锁的生效。且在加锁和解锁处需要通过lock()和unlock()显示指出。所以一般会在finally块中写unlock()以防死锁。

**6.多线程的实现，比如一个任务需要调用多个接口，每个接口间的返回无顺序，如何实现？**
[Java中的多线程你只要看这一篇就够了](http://www.jianshu.com/p/40d4c7aebd66)
[java并发编程-Executor框架](http://www.iteye.com/topic/366591)
方式1：使用自定义信号量和ReentrantLock

业务：电商，健康；技术：Java, 后台Mybatis, dubbo, Servlet网关，自己开发的发布系统。


# 喜马拉雅FM #
[喜马拉雅FM官网](http://www.ximalaya.com/explore/)
在张江高科，还算方便

面试官A
1.AOP有哪些实现的方式，比如@AspectJ或者cglib?
2.Spring IOC的原理，其是如何实现的？
3.你是如何理解job读写数据库和消息队列的？
4.redis如何扩容和缩容？
5.failover如何处理
6.HashMap实现
7.LongAddr使用过没有？
8.你用过的concurrent包有哪些？
AtomicLong, Int, CoutDownLatch（B锁）
9.volatile与synchronize的区别？
10.jvm的回收算法？分代的形式？
cms收集器，年轻、年老代设置不同的回收方式
11.Spring是饿汉模式还是懒汉模式？
加载的顺序，Bean, BeanDefinition, 
12.你们对中间件的使用？
13.Redis, Sorted set, Map等数据结构的实际使用？
14.ABA问题，Curator是如何实现分布式锁的？(Zookeeper，对节点值排序？)


面试官B
1.如何在使用https协议的情况下，保证统计数据（专辑播放次数等信息）不被篡改、重放
幂等，报文摘要
埋点，幂等
如何防止DDos攻击？

2.如何实现一个秒杀系统？

# 阔地教育 #
[阔地教育官网](http://www.codyy.com/)
在凌空soho，算是发展中

业务：K12互联网教育，音视频，类似爱奇艺的基础技术
特点：线下发展的很不错，在安徽、天津等地区进入了课堂。三大课堂，专地课堂、名校课堂、名师课堂，解决教育资源不平衡的问题，关注国家教育方面的政策。
目标：智慧教育，上海准备打造扩学堂
优势：锻炼人，从0到1的过程
1.Java线程模型
2.如何查看linux系统的进程、线程状态，例如top命令
3.一致性hash
4.分布式事务，2pc（阿里有对应实现），3pc，paxos, zk等协议原理。
5.熟悉的常见设计模式
6.无锁队列的概念


# 挖财 #
[挖财官网](http://www.wacai.com/)
在蓝村路，交通算是方便，不过在修路
公司的技术氛围一般了，看了一本他们技术总监的SpringCloud微服务的书

1.贵方公司SOA的原理，比如soa2.0的源码，dubbo
2.zk是如何实现负载均衡的？
3.支付、清结算、p2p、供应链金融的业务模型
4.Storm的模式
sqout, blot
5.Spring中Bean的生命周期
6.Service之间的调用链，如何可以很好的防止不合理的调用链？
7.你熟悉的算法有哪些？
8.ArrayList的实现？
9.你平时使用队列么？

业务：基金超市，作为基金代理，设计交易，清算等。

# 第四范式 #
[第四范式](https://www.4paradigm.com/)
电话面试，女架构师非常的吊

1.你们的架构师如何的？
2.web应用或者服务是如何保证高可用的？
3.你熟悉Hadoop么？
业务：为客户提供it服务，类似高端外包，即使有科学家。

# TravelZoo旅游族 #
[旅游族](https://www.travelzoo.com/cn/)
这是一个.NET面试，算是热身。
业务：包括广告（邮件，WeChat类通知）、团购（类似美团）、HotelBooking（推荐少量精选）三个部分，算是一个Focus在高端用户上旅游类公司，总体来说业务和技术的人都还是OK的，技术栈还是.NET，虽然不会考虑，但用于回顾下.NET知识和英文还是不错的，接下来记录几个对个人有点价值的问题。
1.WCF和WebAPI都如何来解析请求？
WCF基于ABC（Address, Binding, Contract），WebAPI通过Route将URL映射到对应Controller和Action。
2.Loop循环和Linq集合操作有什么差别？
形式上Loop比较麻烦，Linq会简单很多；性能上，Linq通过yeild return可以提高一定的性能。
3.MVC&WebAPI管道对安全的处理？传值的方式？
AuthenticationFilter, AuthorizationFilter.
根据Scope的不同，包括：Applicaiton;Sesssion;url参数，hidden;tempData基于Action。

Tip:
人痛苦的根源是，能力跟不上欲望；
公司崩溃的根源是，资金跟不上扩张。


# 猩便利 #
















**内部类**
https://www.cnblogs.com/chenssy/p/3388487.html




用了俩天，感觉电池不耐用简单操作运行小程序，续航差不多六个时候就完了，而且容易发烫，键盘键盘手感差，键程短，没感觉，谈不上手感…外观精美精致，做工一流。系统好用…618活动13208拿下，总体感觉比较满意…




